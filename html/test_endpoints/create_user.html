<html>
  <body>
    <div id='response'></div>
    First Name: <input type='text' id='first-name' />
    Last Name: <input type='text' id='last-name' />
    Email: <input type='text' id='email'>
    <button type='button' id='create-user-btn'>Create User</button>


    <div id='users'></div>

    <script type='text/javascript' src='../../js/network/core/scopes_network.js'></script>
    <script type='text/javascript' src='../../js/network/api/scopes_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/get_all_users_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/create_user_api.js'></script>

    <script type='text/javascript'>

      function getAllUsers() {
        // Assemble api payload
        var successful_callback = function(xhttp) {
          console.log("Successful response! " + xhttp.responseText);  
        };
        var failed_callback = function(xhttp) {
          console.log("Failed response! " + xhttp.responseText);  
        };

        var get_all_users_api = new GetAllUsersApi(ScopesNetwork);
        get_all_users_api
          .setSuccessfulCallback(successful_callback)
          .setFailedCallback(failed_callback)
          .send();

      }       

      getAllUsers();

      function createUser() {
        var create_user_api = new CreateUserApi(ScopesNetwork); 

        var first_name = document.getElementById('first-name').value;
        if (first_name == '') {
          alert('First name not set!');
          return;
        }

        var last_name = document.getElementById('last-name').value;
        if (last_name == '') {
          alert('Last name not set!');
          return;
        }

        var email = document.getElementById('email').value;
        if (email == '') {
          alert('Email not set!');
          return;
        }

        var successful_callback = function(response) {
          console.log("Success! " + response.responseText);
        };
        
        var failed_callback = function(response) {
          console.log("Failed! " + response.responseText);
        };

        // Send request
        create_user_api
          .setFirstName(first_name)
          .setLastName(last_name)
          .setEmail(email)
          .setSuccessfulCallback(successful_callback)
          .setFailedCallback(failed_callback)
          .send();
      }

      document.getElementById('create-user-btn').onclick = function() {
        createUser();
      };
    </script>
  </body>
</html>
