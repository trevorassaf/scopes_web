<html>
  <body>
    <div id='new-rsvd-order-form'>
      Scopes count: <input type='text' id='scopes-count' />
      Start time: <input type='text' id='start-time' />
      End time: <input type='text' id='end-time' />
      <button type='button' id='new-rsvd-order-btn'>Reserve Order</button>
    </div>

    <div id='user-form'>
      User id: <input type='text' id='user-id' />
      <button type='button' id='user-btn'>Get Reserved Orders</button>
    </div>

    <div id='rsvd-orders'></div>

    Response payload: <br/>
    <div id='response'></div>

    <script type='text/javascript' src='../../js/network/core/scopes_network.js'></script>
    <script type='text/javascript' src='../../js/network/api/scopes_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/reserve_order_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/get_users_reserved_orders_api.js'></script>

    <script type='text/javascript'>
      function reserveOrder() {
        var reserve_order_api = new ReserveOrderApi(ScopesNetwork);

        // Validate parameters
        var user_id = document.getElementById('user-id').value;
        if (user_id == '') {
          alert('User id not set!');
          return;
        }

        var scopes_count = document.getElementById('scopes-count').value;
        if (scopes_count == '') {
          alert('Scopes count not set!');
          return;
        }

        var start_time = document.getElementById('start-time').value;
        if (start_time == '') {
          alert('Start time not set!');
          return;
        }
        
        var end_time = document.getElementById('end-time').value;
        if (end_time == '') {
          alert('End time not set!');
          return;
        }

        // Execute request
        reserve_order_api 
          .setUserId(user_id)
          .setScopesCount(scopes_count)
          .setStartTime(start_time)
          .setEndTime(end_time)
          .setSuccessfulCallback(
            function(response) {
              console.log("Successful! " + response.responseText);    
            }    
          )
          .setFailedCallback(
            function(response) {
              console.log("Failed! " + response.responseText);    
            }
          )
          .send();
      };

      function getReservedOrders() {
        var get_orders_api = new GetUsersReservedOrdersApi(ScopesNetwork);

        // Validate parameters
        var user_id = document.getElementById('user-id').value;
        if (user_id == '') {
          alert('User id not set!');
          return;
        }

        // Execute request
        get_orders_api
          .setUserId(user_id)
          .setSuccessfulCallback(
            function(response) {
              console.log("Successful! " + response.responseText);    
            }    
          )
          .setFailedCallback(
            function(response) {
              console.log("Failed! " + response.responseText);    
            }
          )
          .send();
      }

      // Bind button handlers to buttons
      document.getElementById('user-btn').onclick = function() {
        getReservedOrders();  
      };

      document.getElementById('new-rsvd-order-btn').onclick = function() {
        reserveOrder();  
      };
    </script>
  </body>
</html>
