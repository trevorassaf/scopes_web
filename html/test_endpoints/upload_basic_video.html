<html>
  <body>
    <div id='upload-video-form'>
      Completed order id: <input type='text' id='cid' />
      Scope index: <input type='text' id='scope-index' />
      Title: <input type='text' id='title' />
      Duration: <input type='text' id='duration' />
      File name: <input type='text' id='file-name' />
      Video1: <input type='file' id='basic-video-file1' />
      <button type='button' id='upload-basic-video-btn'>Upload Basic Video</button>
    </div>

    <div id='basic-videos'></div>

    <script type='text/javascript' src='../../js/network/core/scopes_network.js'></script>
    <script type='text/javascript' src='../../js/network/api/scopes_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/upload_basic_video_api.js'></script>
    <script type='text/javascript'>
      function uploadBasicVideo() {
        var basic_video_files1 = document.getElementById('basic-video-file1');

        if (basic_video_files1.files.length === 0) {
          console.log("No files selected!");
          return;
        }

        var form_data = new FormData();
        form_data.append('api_type', '10');

        form_data.append("video", basic_video_files1.files[0]); 
        console.log(form_data);

        var completed_order_id = document.getElementById('cid').value;
        if (completed_order_id == '') {
          console.log('Completed order id not set!');
          return;
        }

        var scope_index = document.getElementById('scope-index').value;
        if (scope_index == '') {
          console.log('Scope index not set!');
          return;
        }
        
        var title = document.getElementById('title').value;
        if (title == '') {
          console.log('Title not set!');
          return;
        }

        var duration = document.getElementById('duration').value;
        if (duration == '') {
          console.log('Duration not set!');
          return;
        }
        
        var file_name = document.getElementById('file-name').value;
        if (file_name == '') {
          console.log('File-name not set!');
          return;
        }

        var payload = {
          'cid': completed_order_id,
          'scope-index': scope_index,
          'title': title,
          'duration': duration,
          'filename': file_name
        };

        var payload_str = JSON.stringify(payload);
        form_data.append('payload', payload_str);

        var xhttp = new XMLHttpRequest();
        xhttp.open('POST', '../../hhvm/endpoints/endpoint.hh');
        //xhttp.setRequestHeader("Content-Type", "multipart/form-data");
        xhttp.send(form_data);
      };

      document.getElementById('upload-basic-video-btn').onclick = function() {
        uploadBasicVideo();  
      };
    </script>
  </body>
</html>
