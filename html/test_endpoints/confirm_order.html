<html>
  <body>
    <div id='confirm-order-form'>
      Reserved order id: <input type='text' id='rid' />
      Title: <input type='text' id='title' />
      Description: <input type='text' id='desc' />
      Short code id: <input type='text' id='short-code' />
      <button type='button' id='confirm-order-btn'>Confirm Order</button>
    </div>

    <div id='user-form'>
      User id: <input type='text' id='user-id' />
      <button type='button' id='get-confirmed-orders-btn'>Get Confirmed Orders</button>
    </div>

    <div id='confirmed-orders'></div>
    
    <div id='response'></div>

    <script type='text/javascript' src='../../js/network/core/scopes_network.js'></script>
    <script type='text/javascript' src='../../js/network/api/scopes_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/get_users_confirmed_orders_api.js'></script>
    <script type='text/javascript' src='../../js/network/api/confirm_order_api.js'></script>
    <script type='text/javascript'>
      function getUsersConfirmedOrders() {
        var user_id = document.getElementById('user-id').value;
        if (user_id == '') {
          console.log("User id not set!");
          return; 
        }

        var get_confirmed_orders_api = new GetUsersConfirmedOrdersApi(ScopesNetwork);
        get_confirmed_orders_api
          .setUserId(user_id)
          .setSuccessfulCallback(
            function(response) {
              console.log("Succeeded! " + response.responseText);  
            }
          )
          .setFailedCallback(
            function(response) {
              console.log("Failed! " + response.responseText);  
            }
          )
          .send();
      };

      function confirmOrder() {
        var rsvd_order_id = document.getElementById('rid').value;
        var title = document.getElementById('title').value;
        var description = document.getElementById('desc').value;
        var short_code_id = document.getElementById('short-code').value;

        var confirm_order_api = new ConfirmOrderApi(ScopesNetwork);
        confirm_order_api
          .setReservedOrderId(rsvd_order_id)
          .setTitle(title)
          .setDescription(description)
          .setShortCodeId(short_code_id)
          .setSuccessfulCallback(
            function(response) {
              console.log("Succeeded! " + response.responseText);  
            }
          )
          .setFailedCallback(
            function(response) {
              console.log("Failed! " + response.responseText);  
            }
          )
          .send();
      };

      // Bind button handlers to button press
      document.getElementById('get-confirmed-orders-btn').onclick = function() {
        getUsersConfirmedOrders();
      };      

      document.getElementById('confirm-order-btn').onclick = function() {
        confirmOrder();
      };
      
    </script>

  </body>
</html>
