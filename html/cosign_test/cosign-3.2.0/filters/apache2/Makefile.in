##
##  Makefile -- Build procedure for sample cosign Apache module
##  Autogenerated via ``apxs -n cosign -g''.
##

#   the used tools
CC=             @CC@
APXS2=          @APXS2@
APACHECTL2=     @APACHECTL2@
INSTALL=        @INSTALL@

#    The apach 2 apxs build process tends to leave a lot of junk lying around.
APXS2JUNKFILES=	../../common/argcargv.slo ../../common/argcargv.lo \
		../../common/mkcookie.slo ../../common/fbase64.lo \
		../../common/fbase64.slo ../../common/rate.lo \
		../../common/rate.slo ../../common/mkcookie.lo \
		../../filters/common/cookiefs.lo \
		../../filters/common/connect.lo \
		../../filters/common/connect.slo \
		../../filters/common/cookiefs.slo \
		../../filters/common/sparse.lo \
		../../filters/common/sparse.slo \
		../../libsnet/snet.slo ../../libsnet/snet.lo \
		../../version.slo ../../version.lo
APXS2JUNKDIRS=	../../common/.libs ../common/.libs ../../libsnet/.libs \
		../../.libs



#   additional user defines, includes and libraries

INCPATH=        -I../../common @CPPFLAGS@ -I../../libsnet @GSSINC@ -I../common
OPTOPTS=        @OPTOPTS@
DEFS=
LIBS=           @LIBS@ @GSSLIBS@ @ADDLIBS@
LDFLAGS=        @GSSLDFLAGS@ @ADDLDFLAGS@ @LDFLAGS@ @FILTER_LINKER_OPTS@ ${LIBS}

CFLAGS=         ${DEFS} ${INCPATH} @FILTER_COMPILER_OPTS@

SRC=	mod_cosign.c \
	../common/connect.c ../common/cookiefs.c ../common/sparse.c \
	../../common/argcargv.c ../../common/fbase64.c \
	../../common/mkcookie.c ../../common/rate.c \
	../../version.c \
	../../libsnet/snet.c

#   the default target
all: mod_cosign.la

#   compile the DSO file
mod_cosign.la: ${SRC}
	$(APXS2) -c ${CFLAGS} ${LDFLAGS} ${SRC}
	rm -rf ${APXS2JUNKDIRS}
	rm -f ${APXS2JUNKFILES}

#   install the DSO file into the Apache installation
#   and activate it in the Apache configuration
install: all
	$(APXS2) -i -a -n 'cosign' mod_cosign.la

#   cleanup
clean:
	rm -f *.o *.lo *.slo mod_cosign.la
	rm -rf .libs/

#   reload the module by installing and restarting Apache
reload: install restart

#   the general Apache start/restart/stop procedures
start:
	$(APACHECTL2) start
restart:
	$(APACHECTL2) restart
stop:
	$(APACHECTL2) stop

